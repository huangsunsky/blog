<!DOCTYPE html>
<html><head>
    <meta charset="utf-8">
    <meta name="description" content=Aloha!&#32;Welcome&#32;to&#32;cheon&#39;s&#32;blog.>
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="apple-touch-icon" sizes= "76x76" href=https://www.cheon.site/blog/img/apple-touch-icon.png>
    <link rel="icon" href=https://www.cheon.site/blog/img/pen.svg>
    <link rel="stylesheet" href=https://www.cheon.site/blog/css/global.css>
    <link rel="stylesheet" href=https://www.cheon.site/blog/css/nav.css>
    <link rel="stylesheet" href=https://www.cheon.site/blog/css/header.css>
    <link rel="stylesheet" href=https://www.cheon.site/blog/css/index.css>
    <link rel="stylesheet" href=https://www.cheon.site/blog/css/list.css>
    <link rel="stylesheet" href=https://www.cheon.site/blog/css/single.css>
    <link rel="stylesheet" href=https://www.cheon.site/blog/css/footer.css>
    
    <link href="https://fonts.googleapis.com/css?family=Fira+Mono|Noto+Sans+SC|Old+Standard+TT&display=swap" rel="stylesheet">
    
    <link href="//netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <title>cheon&#39;s blog</title>

</head>
<body><section id="header">
    <ul id="menus">
    
    <li class="menu"><a href="https://www.cheon.site"><span>Home</span></a></li>
    
    <li class="menu"><a href="https://www.cheon.site/blog/categories"><span>Categories</span></a></li>
    
    <li class="menu"><a href="https://www.cheon.site/blog/tags"><span>Tags</span></a></li>
    
    <li class="menu"><a href="https://github.com/number317"><span>Projects</span></a></li>
    
    </ul>
    <h1 id="title"><a href="https://www.cheon.site/blog/">cheon&#39;s blog</a></h1>
</section>
<ul class="nav">






<li>
    »
    <a href="https://www.cheon.site/blog/">
    
    cheon&#39;s blog
    
    </a>
</li>


<li>
    »
    <a href="https://www.cheon.site/blog/system/">
    
    system
    
    
    </a>
</li>


<li class="active">
    »
    <a href="https://www.cheon.site/blog/system/redhat_enable_ipv6/">
    
    Redhat Enable Ipv6
    
    </a>
</li>

</ul>

<div>
<section id="main">
  <h1>Redhat Enable Ipv6</h1>
  <time>Last updated Fri Jun 14, 2019</time>
  <div>
      <article id="content">
          

<h1 id="redhat设置开机启用ipv6">RedHat设置开机启用ipv6</h1>

<p>参照的系统信息：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ lsb_release -a
LSB Version:    :core-4.1-amd64:core-4.1-noarch
Distributor ID: RedHatEnterpriseServer
Description:    Red Hat Enterprise Linux Server release 7.3 (Maipo)
Release:    7.3
Codename:   Maipo</code></pre></div>
<p>首先查看系统是否开启了ipv6：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">ifconfig | grep inet</code></pre></div>
<p>或者</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">ip addr | grep inet</code></pre></div>
<p>如果开启了，则应该有ipv6的字段：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">inet 127.0.0.1/8 scope host lo
inet6 ::1/128 scope host 
inet 10.0.2.15/24 brd 10.0.2.255 scope global dynamic eth0
inet6 fe80::a00:27ff:fe3a:b67/64 scope link 
inet 192.168.33.10/24 brd 192.168.33.255 scope global eth1
inet6 fe80::a00:27ff:fef4:9024/64 scope link 
inet 172.17.0.1/16 brd 172.17.255.255 scope global docker0
inet6 fe80::42:9fff:fe3c:183e/64 scope link </code></pre></div>
<p>如果没有开启，则只有inet的字段：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">inet 172.17.0.1  netmask 255.255.0.0  broadcast 0.0.0.0
inet 10.0.52.181  netmask 255.255.255.0  broadcast 10.0.52.255
inet 127.0.0.1  netmask 255.0.0.0
inet 10.130.2.1  netmask 255.255.254.0  broadcast 0.0.0.0</code></pre></div>
<p>查看grub开机配置：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cat /etc/default/grub

<span style="color:#666;font-weight:bold;font-style:italic">GRUB_TIMEOUT</span>=5
<span style="color:#666;font-weight:bold;font-style:italic">GRUB_DISTRIBUTOR</span>=<span style="color:#666;font-style:italic">&#34;</span><span style="font-weight:bold">$(</span>sed <span style="color:#666;font-style:italic">&#39;s, release .*$,,g&#39;</span> /etc/system-release<span style="font-weight:bold">)</span><span style="color:#666;font-style:italic">&#34;</span>
<span style="color:#666;font-weight:bold;font-style:italic">GRUB_DEFAULT</span>=saved
<span style="color:#666;font-weight:bold;font-style:italic">GRUB_DISABLE_SUBMENU</span>=<span style="font-weight:bold;font-style:italic">true</span>
<span style="color:#666;font-weight:bold;font-style:italic">GRUB_TERMINAL_OUTPUT</span>=<span style="color:#666;font-style:italic">&#34;console&#34;</span>
<span style="color:#666;font-weight:bold;font-style:italic">GRUB_CMDLINE_LINUX</span>=<span style="color:#666;font-style:italic">&#34;ipv6.disable=1  rd.lvm.lv=vg_root/lv_root rd.lvm.lv=vg_root/lv_swap rhgb quiet net.ifnames=0 biosdevname=0 ipv6.disable=1&#34;</span>
<span style="color:#666;font-weight:bold;font-style:italic">GRUB_DISABLE_RECOVERY</span>=<span style="color:#666;font-style:italic">&#34;true&#34;</span></code></pre></div>
<p>可以看到<code>ipv6.disable=1</code>，说明ipv6在启动时就已经被禁用了，把该项修改为0：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#666;font-weight:bold;font-style:italic">GRUB_TIMEOUT</span>=5
<span style="color:#666;font-weight:bold;font-style:italic">GRUB_DISTRIBUTOR</span>=<span style="color:#666;font-style:italic">&#34;</span><span style="font-weight:bold">$(</span>sed <span style="color:#666;font-style:italic">&#39;s, release .*$,,g&#39;</span> /etc/system-release<span style="font-weight:bold">)</span><span style="color:#666;font-style:italic">&#34;</span>
<span style="color:#666;font-weight:bold;font-style:italic">GRUB_DEFAULT</span>=saved
<span style="color:#666;font-weight:bold;font-style:italic">GRUB_DISABLE_SUBMENU</span>=<span style="font-weight:bold;font-style:italic">true</span>
<span style="color:#666;font-weight:bold;font-style:italic">GRUB_TERMINAL_OUTPUT</span>=<span style="color:#666;font-style:italic">&#34;console&#34;</span>
<span style="color:#666;font-weight:bold;font-style:italic">GRUB_CMDLINE_LINUX</span>=<span style="color:#666;font-style:italic">&#34;ipv6.disable=0  rd.lvm.lv=vg_root/lv_root rd.lvm.lv=vg_root/lv_swap rhgb quiet net.ifnames=0 biosdevname=0 ipv6.disable=0&#34;</span>
<span style="color:#666;font-weight:bold;font-style:italic">GRUB_DISABLE_RECOVERY</span>=<span style="color:#666;font-style:italic">&#34;true&#34;</span></code></pre></div>
<p>重新生成grub的配置文件：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">grub2-mkconfig -o /boot/grub2/grub.cfg</code></pre></div>
<p>之后重启系统，再次查看网络情况即可发现ipv6已启用：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo reboot
$ ifconfig | grep inet</code></pre></div>
<p>应该可以查看到inet6字样。</p>

      </article>
  </div>
</section>

<aside>
    <h4 id="signature">
        Fri Jan 26, 2018
        
            cheon
        
    </h4>
    
    
    <ul class="tags">
      
        <li> <a href="https://www.cheon.site/blog/tags/ipv6">ipv6</a> </li>
      
    </ul>
    
    <ul class="related">
        
        
        <li><a class="next" href="https://www.cheon.site/blog/system/lvm_intro/"> Lvm Intro</a></li>
        
    </ul>
</aside>

        </div><section id="footer">

<div id="author">
    <h2>About Author</h2>
    <hr>
    <img src=https://www.cheon.site/images/author.jpg></img>
    <p>Life is dance we all have to do.</p>
</div>
<ul id="link">
    <li><a href=https://github.com/number317/aloha.git target="_blank"><i class="fa fa-github" alt="github"></i></a></li>
    <li><a href="mailto:cheon0112358d@gmail.com?subject=blog%27s%20feedback" target="_blank"><i class="fa fa-envelope" alt="email"></i></a></li>
    <li id="wechat"><i class="fa fa-wechat"></i></li>
    <img class="qrcode" src=https://www.cheon.site/images/wechat.jpg>
</ul>
</section>
</body>
</html>
